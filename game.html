<!DOCTYPE html>
<html>
  <head>
    <meta name="propeller" content="f47c18872ae1d872851fef4ad6ef6c82">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4052858639133443"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <title>FastMafs</title>
  </head>
  <body >
    <div id="expression">
      <div id="scoreboard">
        <h3 id="timer"></h3>
        <h3 id="score">Score: 0</h3>
      </div>
      <div id="org">
        <h1 id="prob"></h1>
        <input type="text" id="answer" oninput="myFunction()">
        <h1 id="basec"></h1>
      </div>
    </div>
    <div id="resultc">
      <!--<div id="adrow1">
        <span id="adr1"></span>
        <span id="adr2"></span>
        <span id="adr3"></span>
      </div>-->
      <div id="result">

      </div>
      <!--<div id="adrow2">
        <span id="adr4"></span>
        <span id="adr5"></span>
        <span id="adr6"></span>
      </div>-->
  </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!--<script src="game.js" type="text/javascript"></script>-->
    <script>
    if ( window.history.replaceState ) {
      window.history.replaceState( null, null, window.location.href );
    }
    $("#resultc").hide();
    $("#timer").text("Time: " + String(sessionStorage.getItem("time")));
    var timeleft = parseInt(sessionStorage.getItem("time")) - 1;
    var downloadTimer = setInterval(function(){
      if(timeleft <= 0){
        clearInterval(downloadTimer);
        $("#timer").text("Time: 0");
        $("#expression").hide();
        $("#result").html("<div id='scc'><h2 id='scoreres'>Score: " + score + "</h2> <a href='javascript:window.location.href=window.location.href'><button class='submitter'>Play Again?</button></a>  <a href='https://fastmafs.com/'><button class='submitter1'>Home</button></a></div>");
        $("#resultc").show();
      } else {
        $("#timer").text("Time: " + timeleft);
      }
      timeleft -= 1;
    }, 1000);
      $("#completed").hide();
      var score = 0;
      var options1 = [];
      if (sessionStorage.getItem("add") == "true"){
        options1.push("addition");
      }
      if (sessionStorage.getItem("sub") == "true"){
        options1.push("subtraction");
      }
      if (sessionStorage.getItem("mul") == "true"){
        options1.push("multiplication");
      }
      if (sessionStorage.getItem("div") == "true"){
        options1.push("division");
      }
      if (sessionStorage.getItem("squares") == "true"){
        options1.push("squares");
      }
      if (sessionStorage.getItem("cubes") == "true"){
        options1.push("cubes");
      }
      if (sessionStorage.getItem("facts") == "true"){
        options1.push("factorial");
      }
      if (sessionStorage.getItem("fives") == "true"){
        options1.push("fives");
      }
      if (sessionStorage.getItem("coor") == "true"){
        options1.push("coordinates");
      }
      if (sessionStorage.getItem("base") == "true"){
        options1.push("base");
      }
      if (sessionStorage.getItem("cal") == "true"){
        options1.push("calendar");
      }
      if (sessionStorage.getItem("comb") == "true"){
        options1.push("combinations");
      }
      if (sessionStorage.getItem("temp") == "true"){
        options1.push("temperature");
      }
      if (sessionStorage.getItem("gcd") == "true"){
        options1.push("gcd");
      }
      var chosen = "";

      var functions = {
        addition: function(){
          var first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("addla")) - parseInt(sessionStorage.getItem("addli")) + 1))  +  parseInt(sessionStorage.getItem("addli"));
          var second =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("addra")) - parseInt(sessionStorage.getItem("addri")) + 1))  +  parseInt(sessionStorage.getItem("addri"));
          sessionStorage.setItem("first", String(first));
          sessionStorage.setItem("second", String(second));
          $("#prob").text(first + "+" + second + "=");
        },
        subtraction: function(){
          var first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("subla")) - parseInt(sessionStorage.getItem("subli")) + 1))  +  parseInt(sessionStorage.getItem("subli"));
          var second =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("subra")) - parseInt(sessionStorage.getItem("subri")) + 1))  +  parseInt(sessionStorage.getItem("subri"));
          sessionStorage.setItem("first", String(first));
          sessionStorage.setItem("second", String(second));
          $("#prob").text(first + "-" + second + "=");
        },
        multiplication: function(){
          var first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("mulla")) - parseInt(sessionStorage.getItem("mulli")) + 1))  +  parseInt(sessionStorage.getItem("mulli"));
          var second =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("mulra")) - parseInt(sessionStorage.getItem("mulri")) + 1))  +  parseInt(sessionStorage.getItem("mulri"));
          sessionStorage.setItem("first", String(first));
          sessionStorage.setItem("second", String(second));
          $("#prob").text(first + "ร" + second + "=");
        },
        division: function(){
          var first;
          var second;
          while (1 == 1){
            first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("divla")) - parseInt(sessionStorage.getItem("divli")) + 1))  +  parseInt(sessionStorage.getItem("divli"));
            second =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("divra")) - parseInt(sessionStorage.getItem("divri")) + 1))  +  parseInt(sessionStorage.getItem("divri"));
            if (Number.isInteger(first / second) || (Number.isInteger(second / first))){
              if (second > first){
                var temp = first;
                first = second;
                second = temp;
              }
              sessionStorage.setItem("first", String(first));
              sessionStorage.setItem("second", String(second));
              $("#prob").text(first + "รท" + second + "=");
              break;
            }
          }
        },
        squares: function(){
          var first = Math.floor(Math.random() * (parseInt(sessionStorage.getItem("sqrla")) - parseInt(sessionStorage.getItem("sqrli")) + 1))  +  parseInt(sessionStorage.getItem("sqrli"));
          sessionStorage.setItem("first", String(first));
          $("#prob").html(first +"<sup>2</sup>=");
        },
        cubes: function(){
          var first = Math.floor(Math.random() * (parseInt(sessionStorage.getItem("cubea")) - parseInt(sessionStorage.getItem("cubei")) + 1))  +  parseInt(sessionStorage.getItem("cubei"));
          sessionStorage.setItem("first", String(first));
          $("#prob").html(first +"<sup>3</sup>=");
        },
        factorial: function(){
          var first = Math.floor(Math.random() * (parseInt(sessionStorage.getItem("facta")) - parseInt(sessionStorage.getItem("facti")) + 1))  +  parseInt(sessionStorage.getItem("facti"));
          sessionStorage.setItem("first", String(first));
          $("#prob").html(first +"!=");
        },
        fives: function(){
          first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("fla")) - parseInt(sessionStorage.getItem("fli")) + 1))  +  parseInt(sessionStorage.getItem("fli"));
          second =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("fra")) - parseInt(sessionStorage.getItem("fri")) + 1))  +  parseInt(sessionStorage.getItem("fri"));
          if (first % 10 != 5){
              if (first % 10 <= 4 && first % 10 >= 1){
                let a = first + (5 - first % 5);
                let b = first - (5 + first % 5);
                if (a >= parseInt(sessionStorage.getItem("fli")) && a <= parseInt(sessionStorage.getItem("fla"))){
                  first = a;
                }
                else {
                  first = b;
                }
              }
              else if (first % 10 >= 6 && first % 10 <= 9){
                let a = first - (first % 5);
                let b = first + (10 - first % 5);
                if (a >= parseInt(sessionStorage.getItem("fli")) && a <= parseInt(sessionStorage.getItem("fla"))){
                  first = a;
                }
                else {
                  first = b;
                }
              }
              else if (first % 10 == 0){
                let a = first + 5;
                let b = first - 5;
                if (a >= parseInt(sessionStorage.getItem("fli")) && a <= parseInt(sessionStorage.getItem("fla"))){
                  first = a;
                }
                else {
                  first = b;
                }
              }

          }
          if (second % 10 != 5){
              if (second % 10 <= 4 && second % 10 >= 1){
                let a = second + (5 - second % 5);
                let b = second - (5 + second % 5);
                if (a >= parseInt(sessionStorage.getItem("fli")) && a <= parseInt(sessionStorage.getItem("fla"))){
                  second = a;
                }
                else {
                  second = b;
                }
              }
              else if (second % 10 >= 6 && second % 10 <= 9){
                let a = second - (second % 5);
                let b = second + (10 - second % 5);
                if (a >= parseInt(sessionStorage.getItem("fli")) && a <= parseInt(sessionStorage.getItem("fla"))){
                  second = a;
                }
                else {
                  second = b;
                }
              }
              else if (second % 10 == 0){
                let a = second + 5;
                let b = second - 5;
                if (a >= parseInt(sessionStorage.getItem("fli")) && a <= parseInt(sessionStorage.getItem("fla"))){
                  second = a;
                }
                else {
                  second = b;
                }
              }

          }
          sessionStorage.setItem("first", String(first));
          sessionStorage.setItem("second", String(second));
          $("#prob").text(first + "ร" + second + "=");
        },
          coordinates: function(){
          first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("cla")) - parseInt(sessionStorage.getItem("cli")) + 1))  +  parseInt(sessionStorage.getItem("cli"));
          second =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("cra")) - parseInt(sessionStorage.getItem("cri")) + 1))  +  parseInt(sessionStorage.getItem("cri"));
          third =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("cla")) - parseInt(sessionStorage.getItem("cli")) + 1))  +  parseInt(sessionStorage.getItem("cli"));
          fourth =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("cra")) - parseInt(sessionStorage.getItem("cri")) + 1))  +  parseInt(sessionStorage.getItem("cri"));
          sessionStorage.setItem("first", String(first));
          sessionStorage.setItem("second", String(second));
          sessionStorage.setItem("third", String(third));
          sessionStorage.setItem("fourth", String(fourth));
          $("#prob").text("Squared Distance between (" + first + ", " + third + ") and (" + second + ", " + fourth + ") = ");
        },
        base: function(){
          first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("basenla")) - parseInt(sessionStorage.getItem("basenli")) + 1))  +  parseInt(sessionStorage.getItem("basenli"));
          second =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("basela")) - parseInt(sessionStorage.getItem("baseli")) + 1))  +  parseInt(sessionStorage.getItem("baseli"));
          third =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("basera")) - parseInt(sessionStorage.getItem("baseri")) + 1))  +  parseInt(sessionStorage.getItem("baseri"));
          ask = first.toString(second).toUpperCase();
          ans = first.toString(third).toUpperCase();
          sessionStorage.setItem("first", String(first));
          sessionStorage.setItem("second", String(second));
          sessionStorage.setItem("third", String(third));
          sessionStorage.setItem("ans", String(ans));
          $("#prob").html(ask + "<sub>"+ second + "</sub>" + "=");
          $("#basec").html("<sub>"+ third + "</sub>" );
        },
        calendar: function(){
          function randomDate(start, end) {
            return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
          }
          const d = randomDate(new Date(1582, 9, 15), new Date(9999, 11, 31));
          const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
          ans1 = days[d.getDay()];

          sessionStorage.setItem("answer", String(ans1));
          const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
          $("#prob").text(months[d.getMonth()] + " " + d.getDate() + ", " + d.getFullYear());
        },
        combinations: function(){
          corp = Math.floor(Math.random() * 2);
          first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("comba")) - parseInt(sessionStorage.getItem("combi")) + 1))  +  parseInt(sessionStorage.getItem("combi"));
          second = Math.floor(Math.random() * (first + 1));
          function factdo (num){
            let ans = 1;
            if (num == 0 || num == 1){
              return ans;
            }
            for (var i = 2; i <= num; i++){
              ans *= i;
            }
            return ans;
          }
          ans = 0;
          if (corp == 0){
            $("#prob").text("C(" + first + "," + second + ")=");
            ans = factdo(first) / (factdo(first - second) * factdo(second));
          }
          else{
            ans = factdo(first) / (factdo(first - second));
            $("#prob").text("P(" + first + "," + second + ")=");
          }
          sessionStorage.setItem("ans", String(ans));
        },
        temperature: function(){
          corf = Math.floor(Math.random() * 2);
          if (corf == 0){
            function round(value, precision) {
              var multiplier = Math.pow(10, precision || 0);
              return Math.round(value * multiplier) / multiplier;
            }
            tempc = Math.floor(Math.random() * 374) - 273;
            fah = (tempc * (9/5)) + 32;
            fah = round(fah, 1);

            sessionStorage.setItem("answer", String(fah));
            $("#prob").text(tempc + "ยฐC=");
            $("#basec").text("ยฐF");

          }
          else {
            tempf = Math.floor(Math.random() * 672) - 459;
            $("#prob").text(tempf + "ยฐF=");
            ans = (tempf - 32) * (5/9);
            $("#basec").text("ยฐC");
            if (Number.isInteger(ans) == false){
                var whole = 0;
                let fracs = ((tempf - 32) * 5) % 9;
                if (ans >= 0){
                  whole = Math.floor(ans);
                  fracs = ((tempf - 32) * 5) % 9;
                }
                else if (ans < 0){
                  whole = Math.ceil(ans);
                  fracs = (((tempf - 32) * 5) % 9)*(-1);
                }
                if (fracs == 3){
                  ans = whole + " " + "1/3";
                }
                else if (fracs == 6){
                  ans = whole + " " + "2/3";
                }
                else {
                  ans = whole + " " + fracs + "/9";
                }

            }
            sessionStorage.setItem("answer", String(ans));
          }
        },
        gcd: function(){
          first =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("gcda")) - parseInt(sessionStorage.getItem("gcdi")) + 1))  +  parseInt(sessionStorage.getItem("gcdi"));
          second =  Math.floor(Math.random() * (parseInt(sessionStorage.getItem("gcda")) - parseInt(sessionStorage.getItem("gcdi")) + 1))  +  parseInt(sessionStorage.getItem("gcdi"));
          choice = Math.floor(Math.random() * 2);
          function gcd_two_numbers(x, y) {
            if ((typeof x !== 'number') || (typeof y !== 'number'))
            return false;
            x = Math.abs(x);
            y = Math.abs(y);
            while(y) {
              var t = y;
              y = x % y;
              x = t;
            }
            return x;
          }
          if ( choice == 0){
            gcd = gcd_two_numbers(first, second);
            sessionStorage.setItem("ans", gcd);
            $("#prob").text("GCD(" + first + "," + second + ")=");
          }
          else {
            product = first * second;
            lcm = product / gcd_two_numbers(first, second);
            sessionStorage.setItem("ans", lcm);
            $("#prob").text("LCM(" + first + "," + second + ")=");
          }
        }
      };
      function myFunction() {
        if (chosen == "addition"){
          if ($("#answer").val() == (parseInt(sessionStorage.getItem("first")) + parseInt(sessionStorage.getItem("second")))){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "subtraction"){
          if ($("#answer").val() == (parseInt(sessionStorage.getItem("first")) - parseInt(sessionStorage.getItem("second")))){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "multiplication" || chosen == "fives"){
          if ($("#answer").val() == (parseInt(sessionStorage.getItem("first")) * parseInt(sessionStorage.getItem("second")))){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "division"){
          if ($("#answer").val() == (parseInt(sessionStorage.getItem("first")) / parseInt(sessionStorage.getItem("second")))){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "squares"){
          if ($("#answer").val() == Math.pow(sessionStorage.getItem("first"), 2)){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "cubes"){
          if ($("#answer").val() == Math.pow(sessionStorage.getItem("first"), 3)){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "factorial"){
          function factdo (num){
            let ans = 1;
            if (num == 0 || num == 1){
              return ans;
            }
            for (var i = 2; i <= num; i++){
              ans *= i;
            }
            return ans;
          }
          if ($("#answer").val() == factdo(parseInt(sessionStorage.getItem("first")))){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "coordinates"){
          if ($("#answer").val() == Math.pow(parseInt(sessionStorage.getItem("first")) - parseInt(sessionStorage.getItem("third")), 2) + Math.pow(parseInt(sessionStorage.getItem("fourth")) - parseInt(sessionStorage.getItem("second")), 2)){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "base"){
          if ($("#answer").val() == sessionStorage.getItem("ans")){
            score++;
            $("#answer").val("");
            $("#basec").text("");
            chooser();
          }
        }
        else if (chosen == "calendar"){
          if ($("#answer").val() == sessionStorage.getItem("answer")){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "combinations"){
          if ($("#answer").val() == sessionStorage.getItem("ans")){
            score++;
            $("#answer").val("");
            chooser();
          }
        }
        else if (chosen == "temperature"){
          if ($("#answer").val() == sessionStorage.getItem("answer")){
            score++;
            $("#answer").val("");
            $("#basec").text("");
            chooser();
          }
        }
        else if (chosen == "gcd"){
          if ($("#answer").val() == sessionStorage.getItem("ans")){
            score++;
            $("#answer").val("");
            $("#basec").text("");
            chooser();
          }
        }
      }
      function chooser() {
        $("#score").text("Score: " + score);
        var rands = Math.floor(Math.random() * options1.length);
        chosen = options1[rands];
        functions[options1[rands]]();
      }
      document.getElementById("answer").focus();
      chooser();

    </script>
    <script type="text/javascript">
    var vglnk = {key: '96bf7c66d2eeffed2a10b23698e3b816'};
    (function(d, t) {
        var s = d.createElement(t);
            s.type = 'text/javascript';
            s.async = true;
            s.src = '//cdn.viglink.com/api/vglnk.js';
        var r = d.getElementsByTagName(t)[0];
            r.parentNode.insertBefore(s, r);
    }(document, 'script'));
</script>
  </body>
</html>
